{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Attendance</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">

<nav class="bg-indigo-900 text-white p-4 flex justify-between">
  <h1 class="text-xl font-bold">My Attendance</h1>
  <a href="{% url 'student_dashboard' %}" class="hover:underline">Dashboard</a>
</nav>

<div class="max-w-6xl mx-auto mt-6 bg-white p-6 rounded shadow">

  <h2 class="text-2xl font-semibold mb-4">Attendance Records</h2>

  {% if course_stats %}
  <table class="w-full border text-left mb-6">
    <thead class="bg-gray-100">
      <tr>
        <th class="p-2 border">Course</th>
        <th class="p-2 border">Total Classes</th>
        <th class="p-2 border">Classes Present</th>
        <th class="p-2 border">Attendance %</th>
      </tr>
    </thead>
    <tbody>
      {% for course, stats in course_stats.items %}
      <tr class="hover:bg-gray-50">
        <td class="p-2 border">{{ course.code }} - {{ course.name }}</td>
        <td class="p-2 border">{{ stats.total }}</td>
        <td class="p-2 border">{{ stats.present }}</td>
        <td class="p-2 border font-semibold text-indigo-700">{{ stats.percentage }}%</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
    <p class="text-gray-500">No attendance records available.</p>
  {% endif %}

  <h3 class="text-xl font-semibold mb-2">Detailed Records</h3>
  <table class="w-full border text-left">
    <thead class="bg-gray-100">
      <tr>
        <th class="p-2 border">Date</th>
        <th class="p-2 border">Course</th>
        <th class="p-2 border">Status</th>
      </tr>
    </thead>
    <tbody>
      {% for record in records %}
      <tr class="hover:bg-gray-50">
        <td class="p-2 border">{{ record.date }}</td>
        <td class="p-2 border">{{ record.course.code }} - {{ record.course.name }}</td>
        <td class="p-2 border font-semibold {% if record.status == 'Present' %}text-green-600{% else %}text-red-600{% endif %}">
          {{ record.status }}
        </td>
      </tr>
      {% empty %}
        <tr><td colspan="3" class="p-2 text-gray-500">No records found.</td></tr>
      {% endfor %}
    </tbody>
  </table>

</div>

</body>
</html>
